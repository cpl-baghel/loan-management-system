{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Card,Table,Button,Badge,Modal,Image,Row,Col,Form,Alert,ButtonGroup,Tabs,Tab}from'react-bootstrap';import{getPendingVerifications,getUserDocuments,updateUserVerification,quickVerifyUser}from'../../services/adminService';import{uploadUserDocument}from'../../services/userService';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const UserVerificationPanel=()=>{const[loading,setLoading]=useState(true);const[selectedUser,setSelectedUser]=useState(null);const[showDocumentModal,setShowDocumentModal]=useState(false);const[currentDocument,setCurrentDocument]=useState(null);const[verificationNotes,setVerificationNotes]=useState('');const[error,setError]=useState(null);const[success,setSuccess]=useState(null);const[allUsers,setAllUsers]=useState([]);const[filteredUsers,setFilteredUsers]=useState([]);const[documents,setDocuments]=useState({});const[uploadingDocument,setUploadingDocument]=useState(false);const[documentType,setDocumentType]=useState('aadharCard');const[documentFile,setDocumentFile]=useState(null);const[statusFilter,setStatusFilter]=useState('all');const[activeTab,setActiveTab]=useState('pending');useEffect(()=>{console.log('UserVerificationPanel mounted, fetching data...');fetchAllUsers();},[]);// Watch for changes in the allUsers array or statusFilter and update filteredUsers\nuseEffect(()=>{filterUsers();},[allUsers,statusFilter,activeTab]);const fetchAllUsers=async()=>{try{setLoading(true);setError(null);console.log('Calling getPendingVerifications...');const data=await getPendingVerifications();console.log('Received all users:',data);setAllUsers(data||[]);// Initial filtering\nfilterUsers();}catch(err){console.error('Error fetching users:',err);setError('Failed to fetch users: '+(err.message||JSON.stringify(err)));}finally{setLoading(false);}};const filterUsers=()=>{let filtered=[...allUsers];// Sort users by verification status - pending and not_submitted first\nfiltered.sort((a,b)=>{const order={'pending':0,'not_submitted':1,'rejected':2,'verified':3};return order[a.verificationStatus]-order[b.verificationStatus];});// Filter by tab\nif(activeTab==='pending'){filtered=filtered.filter(user=>user.verificationStatus==='pending'||user.verificationStatus==='not_submitted'||user.verificationStatus==='rejected');}else if(activeTab==='verified'){filtered=filtered.filter(user=>user.verificationStatus==='verified');}setFilteredUsers(filtered);};// View user documents\nconst handleViewDocuments=async userId=>{try{setError(null);console.log('Fetching documents for user:',userId);const docs=await getUserDocuments(userId);console.log('Received documents:',docs);setDocuments(docs);setSelectedUser(allUsers.find(user=>user._id===userId));// Check if user has no documents\nconst user=allUsers.find(u=>u._id===userId);if(user&&user.verificationStatus==='not_submitted'){setError('This user has not submitted verification documents yet but has loan applications. They need to upload documents before verification.');}}catch(err){console.error('Error fetching documents:',err);setError('Failed to fetch user documents: '+(err.message||JSON.stringify(err)));}};// View a specific document\nconst handleViewDocument=(docType,filename)=>{if(!filename)return;setCurrentDocument({type:docType,filename:filename,userId:selectedUser._id});setShowDocumentModal(true);};const handleVerification=async status=>{if(!selectedUser)return;try{setError(null);await updateUserVerification(selectedUser._id,status,verificationNotes);setSuccess(`User ${selectedUser.name} has been ${status==='verified'?'approved':'rejected'}`);// Update the user in the allUsers array\nconst updatedUsers=allUsers.map(user=>{if(user._id===selectedUser._id){return{...user,verificationStatus:status};}return user;});setAllUsers(updatedUsers);// Close user view after verification\nsetSelectedUser(null);setVerificationNotes('');}catch(err){setError('Failed to update verification status: '+(err.message||'Unknown error'));console.error(err);}};const handleDocumentUpload=async e=>{e.preventDefault();if(!selectedUser||!documentFile)return;try{setError(null);setUploadingDocument(true);await uploadUserDocument(selectedUser._id,documentType,documentFile);setSuccess(`${documentType.replace(/([A-Z])/g,' $1').replace(/^./,str=>str.toUpperCase())} uploaded successfully`);setDocumentFile(null);// Refresh documents after upload\nconst docs=await getUserDocuments(selectedUser._id);setDocuments(docs);}catch(err){console.error('Error uploading document:',err);setError('Failed to upload document: '+(err.message||JSON.stringify(err)));}finally{setUploadingDocument(false);}};const handleFileChange=e=>{setDocumentFile(e.target.files[0]);};const handleTabChange=tab=>{setActiveTab(tab);};const handleQuickVerify=async userId=>{try{setLoading(true);setError(null);await quickVerifyUser(userId);setSuccess(\"User has been quickly verified!\");// Update the user in the allUsers array to show the change immediately\nconst updatedUsers=allUsers.map(user=>{if(user._id===userId){return{...user,verificationStatus:'verified'};}return user;});setAllUsers(updatedUsers);filterUsers();// Re-filter the users list\n}catch(err){console.error('Error quick verifying user:',err);setError('Failed to verify user: '+(err.message||JSON.stringify(err)));}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{children:[error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),success&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",children:success}),loading?/*#__PURE__*/_jsx(\"p\",{className:\"text-center\",children:\"Loading verification data...\"}):selectedUser?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h5\",{children:[\"Reviewing: \",selectedUser.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",selectedUser.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Phone:\"}),\" \",selectedUser.phone]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status:\"}),\" \",/*#__PURE__*/_jsx(Badge,{bg:selectedUser.verificationStatus==='pending'?'warning':selectedUser.verificationStatus==='verified'?'success':selectedUser.verificationStatus==='not_submitted'?'secondary':'danger',children:selectedUser.verificationStatus==='not_submitted'?'Not Submitted':selectedUser.verificationStatus})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Loan Applications:\"}),\" \",selectedUser.loanCount]}),!documents.aadharCard&&!documents.panCard&&!documents.incomeProof&&/*#__PURE__*/_jsxs(Alert,{variant:\"warning\",children:[/*#__PURE__*/_jsx(\"h6\",{children:\"No Documents Uploaded\"}),/*#__PURE__*/_jsx(\"p\",{children:\"This user has not uploaded any verification documents yet. They need to upload their documents before you can verify them.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"As an admin, you can upload documents on behalf of the user:\"}),/*#__PURE__*/_jsx(Form,{onSubmit:handleDocumentUpload,children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Document Type\"}),/*#__PURE__*/_jsxs(Form.Select,{value:documentType,onChange:e=>setDocumentType(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"aadharCard\",children:\"Aadhar Card\"}),/*#__PURE__*/_jsx(\"option\",{value:\"panCard\",children:\"PAN Card\"}),/*#__PURE__*/_jsx(\"option\",{value:\"incomeProof\",children:\"Income Proof\"})]})]})}),/*#__PURE__*/_jsx(Col,{md:5,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"File\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"file\",onChange:handleFileChange,required:true})]})}),/*#__PURE__*/_jsx(Col,{md:3,className:\"d-flex align-items-end\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",className:\"mb-3 w-100\",disabled:!documentFile||uploadingDocument,children:uploadingDocument?'Uploading...':'Upload Document'})})]})})]}),/*#__PURE__*/_jsx(\"h6\",{className:\"mt-4\",children:\"Documents:\"}),documents.aadharCard||documents.panCard||documents.incomeProof?/*#__PURE__*/_jsxs(Row,{children:[documents.aadharCard&&/*#__PURE__*/_jsx(Col,{md:4,className:\"mb-3\",children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Aadhar Card\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",size:\"sm\",onClick:()=>handleViewDocument('aadharCard',documents.aadharCard),className:\"w-100\",children:\"View Document\"})]})})}),documents.panCard&&/*#__PURE__*/_jsx(Col,{md:4,className:\"mb-3\",children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h6\",{children:\"PAN Card\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",size:\"sm\",onClick:()=>handleViewDocument('panCard',documents.panCard),className:\"w-100\",children:\"View Document\"})]})})}),documents.incomeProof&&/*#__PURE__*/_jsx(Col,{md:4,className:\"mb-3\",children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Income Proof\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",size:\"sm\",onClick:()=>handleViewDocument('incomeProof',documents.incomeProof),className:\"w-100\",children:\"View Document\"})]})})})]}):/*#__PURE__*/_jsx(\"p\",{children:\"No documents available for review.\"}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mt-3 mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Verification Notes:\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",rows:3,value:verificationNotes,onChange:e=>setVerificationNotes(e.target.value),placeholder:\"Add notes about this verification (optional)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mt-4\",children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>{setSelectedUser(null);setVerificationNotes('');},children:\"Back to List\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:()=>handleVerification('rejected'),className:\"me-2\",children:\"Reject Verification\"}),/*#__PURE__*/_jsx(Button,{variant:\"success\",onClick:()=>handleVerification('verified'),children:\"Approve Verification\"})]})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{variant:\"outline-primary\",size:\"sm\",onClick:fetchAllUsers,children:\"Refresh Data\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"ms-2\",children:[\"Found \",filteredUsers.length,\" users\"]})]}),/*#__PURE__*/_jsxs(Tabs,{activeKey:activeTab,onSelect:handleTabChange,className:\"mb-3\",children:[/*#__PURE__*/_jsx(Tab,{eventKey:\"pending\",title:\"Pending Verification\"}),/*#__PURE__*/_jsx(Tab,{eventKey:\"verified\",title:\"Verified Users\"}),/*#__PURE__*/_jsx(Tab,{eventKey:\"all\",title:\"All Users\"})]})]}),filteredUsers.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"p\",{children:activeTab==='verified'?'No verified users found.':'No users pending verification.'})}):/*#__PURE__*/_jsxs(Table,{responsive:true,striped:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Loan Applications\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredUsers.map(user=>/*#__PURE__*/_jsxs(\"tr\",{className:user.hasPendingLoans?'table-warning':'',children:[/*#__PURE__*/_jsx(\"td\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Badge,{bg:user.verificationStatus==='pending'?'warning':user.verificationStatus==='verified'?'success':user.verificationStatus==='not_submitted'?'secondary':'danger',children:user.verificationStatus==='not_submitted'?'Not Submitted':user.verificationStatus})}),/*#__PURE__*/_jsxs(\"td\",{children:[user.loanCount,user.pendingLoanCount>0&&/*#__PURE__*/_jsxs(Badge,{bg:\"warning\",className:\"ms-2\",children:[user.pendingLoanCount,\" pending\"]})]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsxs(Button,{variant:user.hasPendingLoans?\"warning\":\"primary\",size:\"sm\",onClick:()=>handleViewDocuments(user._id),className:\"me-2\",children:[user.verificationStatus==='verified'?'View Details':'Review Documents',user.hasPendingLoans&&' (Urgent)']}),user.verificationStatus!=='verified'&&user.hasPendingLoans&&/*#__PURE__*/_jsx(Button,{variant:\"success\",size:\"sm\",onClick:()=>handleQuickVerify(user._id),title:\"Quickly verify this user without reviewing documents\",children:\"Quick Verify\"})]})]},user._id))})]})]}),/*#__PURE__*/_jsxs(Modal,{show:showDocumentModal,onHide:()=>setShowDocumentModal(false),size:\"lg\",centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsxs(Modal.Title,{children:[(currentDocument===null||currentDocument===void 0?void 0:currentDocument.type)==='aadharCard'&&'Aadhar Card',(currentDocument===null||currentDocument===void 0?void 0:currentDocument.type)==='panCard'&&'PAN Card',(currentDocument===null||currentDocument===void 0?void 0:currentDocument.type)==='incomeProof'&&'Income Proof']})}),/*#__PURE__*/_jsx(Modal.Body,{className:\"text-center\",children:currentDocument&&/*#__PURE__*/_jsxs(\"div\",{className:\"document-preview\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"mb-3\",children:[\"Filename: \",currentDocument.filename]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border p-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Document preview would appear here in a real application\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"This is a placeholder for document: \",currentDocument.filename]})]})]})}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setShowDocumentModal(false),children:\"Close\"})})]})]});};export default UserVerificationPanel;","map":{"version":3,"names":["React","useState","useEffect","Card","Table","Button","Badge","Modal","Image","Row","Col","Form","Alert","ButtonGroup","Tabs","Tab","getPendingVerifications","getUserDocuments","updateUserVerification","quickVerifyUser","uploadUserDocument","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UserVerificationPanel","loading","setLoading","selectedUser","setSelectedUser","showDocumentModal","setShowDocumentModal","currentDocument","setCurrentDocument","verificationNotes","setVerificationNotes","error","setError","success","setSuccess","allUsers","setAllUsers","filteredUsers","setFilteredUsers","documents","setDocuments","uploadingDocument","setUploadingDocument","documentType","setDocumentType","documentFile","setDocumentFile","statusFilter","setStatusFilter","activeTab","setActiveTab","console","log","fetchAllUsers","filterUsers","data","err","message","JSON","stringify","filtered","sort","a","b","order","verificationStatus","filter","user","handleViewDocuments","userId","docs","find","_id","u","handleViewDocument","docType","filename","type","handleVerification","status","name","updatedUsers","map","handleDocumentUpload","e","preventDefault","replace","str","toUpperCase","handleFileChange","target","files","handleTabChange","tab","handleQuickVerify","children","variant","className","email","phone","bg","loanCount","aadharCard","panCard","incomeProof","onSubmit","md","Group","Label","Select","value","onChange","Control","required","disabled","Body","size","onClick","as","rows","placeholder","length","activeKey","onSelect","eventKey","title","responsive","striped","hover","hasPendingLoans","pendingLoanCount","show","onHide","centered","Header","closeButton","Title","Footer"],"sources":["C:/Users/cpl/Desktop/Cursor/loan-management-system/client/src/components/admin/UserVerificationPanel.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Card, Table, Button, Badge, Modal, Image, Row, Col, Form, Alert, ButtonGroup, Tabs, Tab } from 'react-bootstrap';\r\nimport { getPendingVerifications, getUserDocuments, updateUserVerification, quickVerifyUser } from '../../services/adminService';\r\nimport { uploadUserDocument } from '../../services/userService';\r\n\r\nconst UserVerificationPanel = () => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedUser, setSelectedUser] = useState(null);\r\n  const [showDocumentModal, setShowDocumentModal] = useState(false);\r\n  const [currentDocument, setCurrentDocument] = useState(null);\r\n  const [verificationNotes, setVerificationNotes] = useState('');\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(null);\r\n  const [allUsers, setAllUsers] = useState([]);\r\n  const [filteredUsers, setFilteredUsers] = useState([]);\r\n  const [documents, setDocuments] = useState({});\r\n  const [uploadingDocument, setUploadingDocument] = useState(false);\r\n  const [documentType, setDocumentType] = useState('aadharCard');\r\n  const [documentFile, setDocumentFile] = useState(null);\r\n  const [statusFilter, setStatusFilter] = useState('all');\r\n  const [activeTab, setActiveTab] = useState('pending');\r\n\r\n  useEffect(() => {\r\n    console.log('UserVerificationPanel mounted, fetching data...');\r\n    fetchAllUsers();\r\n  }, []);\r\n\r\n  // Watch for changes in the allUsers array or statusFilter and update filteredUsers\r\n  useEffect(() => {\r\n    filterUsers();\r\n  }, [allUsers, statusFilter, activeTab]);\r\n\r\n  const fetchAllUsers = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      console.log('Calling getPendingVerifications...');\r\n      const data = await getPendingVerifications();\r\n      console.log('Received all users:', data);\r\n      setAllUsers(data || []);\r\n      \r\n      // Initial filtering\r\n      filterUsers();\r\n    } catch (err) {\r\n      console.error('Error fetching users:', err);\r\n      setError('Failed to fetch users: ' + (err.message || JSON.stringify(err)));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const filterUsers = () => {\r\n    let filtered = [...allUsers];\r\n    \r\n    // Sort users by verification status - pending and not_submitted first\r\n    filtered.sort((a, b) => {\r\n      const order = { 'pending': 0, 'not_submitted': 1, 'rejected': 2, 'verified': 3 };\r\n      return order[a.verificationStatus] - order[b.verificationStatus];\r\n    });\r\n\r\n    // Filter by tab\r\n    if (activeTab === 'pending') {\r\n      filtered = filtered.filter(user => \r\n        user.verificationStatus === 'pending' || \r\n        user.verificationStatus === 'not_submitted' || \r\n        user.verificationStatus === 'rejected'\r\n      );\r\n    } else if (activeTab === 'verified') {\r\n      filtered = filtered.filter(user => user.verificationStatus === 'verified');\r\n    }\r\n    \r\n    setFilteredUsers(filtered);\r\n  };\r\n\r\n  // View user documents\r\n  const handleViewDocuments = async (userId) => {\r\n    try {\r\n      setError(null);\r\n      console.log('Fetching documents for user:', userId);\r\n      const docs = await getUserDocuments(userId);\r\n      console.log('Received documents:', docs);\r\n      setDocuments(docs);\r\n      setSelectedUser(allUsers.find(user => user._id === userId));\r\n      \r\n      // Check if user has no documents\r\n      const user = allUsers.find(u => u._id === userId);\r\n      if (user && user.verificationStatus === 'not_submitted') {\r\n        setError('This user has not submitted verification documents yet but has loan applications. They need to upload documents before verification.');\r\n      }\r\n    } catch (err) {\r\n      console.error('Error fetching documents:', err);\r\n      setError('Failed to fetch user documents: ' + (err.message || JSON.stringify(err)));\r\n    }\r\n  };\r\n\r\n  // View a specific document\r\n  const handleViewDocument = (docType, filename) => {\r\n    if (!filename) return;\r\n    \r\n    setCurrentDocument({\r\n      type: docType,\r\n      filename: filename,\r\n      userId: selectedUser._id\r\n    });\r\n    setShowDocumentModal(true);\r\n  };\r\n\r\n  const handleVerification = async (status) => {\r\n    if (!selectedUser) return;\r\n\r\n    try {\r\n      setError(null);\r\n      await updateUserVerification(selectedUser._id, status, verificationNotes);\r\n      setSuccess(`User ${selectedUser.name} has been ${status === 'verified' ? 'approved' : 'rejected'}`);\r\n      \r\n      // Update the user in the allUsers array\r\n      const updatedUsers = allUsers.map(user => {\r\n        if (user._id === selectedUser._id) {\r\n          return { ...user, verificationStatus: status };\r\n        }\r\n        return user;\r\n      });\r\n      \r\n      setAllUsers(updatedUsers);\r\n      \r\n      // Close user view after verification\r\n      setSelectedUser(null);\r\n      setVerificationNotes('');\r\n    } catch (err) {\r\n      setError('Failed to update verification status: ' + (err.message || 'Unknown error'));\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const handleDocumentUpload = async (e) => {\r\n    e.preventDefault();\r\n    if (!selectedUser || !documentFile) return;\r\n\r\n    try {\r\n      setError(null);\r\n      setUploadingDocument(true);\r\n      \r\n      await uploadUserDocument(selectedUser._id, documentType, documentFile);\r\n      \r\n      setSuccess(`${documentType.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())} uploaded successfully`);\r\n      setDocumentFile(null);\r\n      \r\n      // Refresh documents after upload\r\n      const docs = await getUserDocuments(selectedUser._id);\r\n      setDocuments(docs);\r\n    } catch (err) {\r\n      console.error('Error uploading document:', err);\r\n      setError('Failed to upload document: ' + (err.message || JSON.stringify(err)));\r\n    } finally {\r\n      setUploadingDocument(false);\r\n    }\r\n  };\r\n\r\n  const handleFileChange = (e) => {\r\n    setDocumentFile(e.target.files[0]);\r\n  };\r\n\r\n  const handleTabChange = (tab) => {\r\n    setActiveTab(tab);\r\n  };\r\n\r\n  const handleQuickVerify = async (userId) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      await quickVerifyUser(userId);\r\n      setSuccess(\"User has been quickly verified!\");\r\n      \r\n      // Update the user in the allUsers array to show the change immediately\r\n      const updatedUsers = allUsers.map(user => {\r\n        if (user._id === userId) {\r\n          return { ...user, verificationStatus: 'verified' };\r\n        }\r\n        return user;\r\n      });\r\n      \r\n      setAllUsers(updatedUsers);\r\n      filterUsers(); // Re-filter the users list\r\n    } catch (err) {\r\n      console.error('Error quick verifying user:', err);\r\n      setError('Failed to verify user: ' + (err.message || JSON.stringify(err)));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {error && <Alert variant=\"danger\">{error}</Alert>}\r\n      {success && <Alert variant=\"success\">{success}</Alert>}\r\n      \r\n      {loading ? (\r\n        <p className=\"text-center\">Loading verification data...</p>\r\n      ) : selectedUser ? (\r\n        <div>\r\n          <h5>Reviewing: {selectedUser.name}</h5>\r\n          <p><strong>Email:</strong> {selectedUser.email}</p>\r\n          <p><strong>Phone:</strong> {selectedUser.phone}</p>\r\n          <p><strong>Status:</strong> <Badge bg={\r\n            selectedUser.verificationStatus === 'pending' ? 'warning' : \r\n            selectedUser.verificationStatus === 'verified' ? 'success' : \r\n            selectedUser.verificationStatus === 'not_submitted' ? 'secondary' : 'danger'\r\n          }>\r\n            {selectedUser.verificationStatus === 'not_submitted' ? 'Not Submitted' : selectedUser.verificationStatus}\r\n          </Badge></p>\r\n          <p><strong>Loan Applications:</strong> {selectedUser.loanCount}</p>\r\n          \r\n          {/* Display a notice if the user hasn't uploaded documents */}\r\n          {!documents.aadharCard && !documents.panCard && !documents.incomeProof && (\r\n            <Alert variant=\"warning\">\r\n              <h6>No Documents Uploaded</h6>\r\n              <p>This user has not uploaded any verification documents yet. They need to upload their documents before you can verify them.</p>\r\n              <p>As an admin, you can upload documents on behalf of the user:</p>\r\n              \r\n              <Form onSubmit={handleDocumentUpload}>\r\n                <Row>\r\n                  <Col md={4}>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Form.Label>Document Type</Form.Label>\r\n                      <Form.Select \r\n                        value={documentType}\r\n                        onChange={(e) => setDocumentType(e.target.value)}\r\n                      >\r\n                        <option value=\"aadharCard\">Aadhar Card</option>\r\n                        <option value=\"panCard\">PAN Card</option>\r\n                        <option value=\"incomeProof\">Income Proof</option>\r\n                      </Form.Select>\r\n                    </Form.Group>\r\n                  </Col>\r\n                  <Col md={5}>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Form.Label>File</Form.Label>\r\n                      <Form.Control \r\n                        type=\"file\" \r\n                        onChange={handleFileChange}\r\n                        required\r\n                      />\r\n                    </Form.Group>\r\n                  </Col>\r\n                  <Col md={3} className=\"d-flex align-items-end\">\r\n                    <Button \r\n                      type=\"submit\" \r\n                      variant=\"primary\" \r\n                      className=\"mb-3 w-100\"\r\n                      disabled={!documentFile || uploadingDocument}\r\n                    >\r\n                      {uploadingDocument ? 'Uploading...' : 'Upload Document'}\r\n                    </Button>\r\n                  </Col>\r\n                </Row>\r\n              </Form>\r\n            </Alert>\r\n          )}\r\n          \r\n          <h6 className=\"mt-4\">Documents:</h6>\r\n          {documents.aadharCard || documents.panCard || documents.incomeProof ? (\r\n            <Row>\r\n              {documents.aadharCard && (\r\n                <Col md={4} className=\"mb-3\">\r\n                  <Card>\r\n                    <Card.Body>\r\n                      <h6>Aadhar Card</h6>\r\n                      <Button \r\n                        variant=\"primary\" \r\n                        size=\"sm\" \r\n                        onClick={() => handleViewDocument('aadharCard', documents.aadharCard)}\r\n                        className=\"w-100\"\r\n                      >\r\n                        View Document\r\n                      </Button>\r\n                    </Card.Body>\r\n                  </Card>\r\n                </Col>\r\n              )}\r\n              \r\n              {documents.panCard && (\r\n                <Col md={4} className=\"mb-3\">\r\n                  <Card>\r\n                    <Card.Body>\r\n                      <h6>PAN Card</h6>\r\n                      <Button \r\n                        variant=\"primary\" \r\n                        size=\"sm\" \r\n                        onClick={() => handleViewDocument('panCard', documents.panCard)}\r\n                        className=\"w-100\"\r\n                      >\r\n                        View Document\r\n                      </Button>\r\n                    </Card.Body>\r\n                  </Card>\r\n                </Col>\r\n              )}\r\n              \r\n              {documents.incomeProof && (\r\n                <Col md={4} className=\"mb-3\">\r\n                  <Card>\r\n                    <Card.Body>\r\n                      <h6>Income Proof</h6>\r\n                      <Button \r\n                        variant=\"primary\" \r\n                        size=\"sm\" \r\n                        onClick={() => handleViewDocument('incomeProof', documents.incomeProof)}\r\n                        className=\"w-100\"\r\n                      >\r\n                        View Document\r\n                      </Button>\r\n                    </Card.Body>\r\n                  </Card>\r\n                </Col>\r\n              )}\r\n            </Row>\r\n          ) : (\r\n            <p>No documents available for review.</p>\r\n          )}\r\n\r\n          <Form.Group className=\"mt-3 mb-3\">\r\n            <Form.Label>Verification Notes:</Form.Label>\r\n            <Form.Control \r\n              as=\"textarea\" \r\n              rows={3} \r\n              value={verificationNotes}\r\n              onChange={(e) => setVerificationNotes(e.target.value)}\r\n              placeholder=\"Add notes about this verification (optional)\"\r\n            />\r\n          </Form.Group>\r\n\r\n          <div className=\"d-flex justify-content-between mt-4\">\r\n            <Button \r\n              variant=\"secondary\" \r\n              onClick={() => {\r\n                setSelectedUser(null);\r\n                setVerificationNotes('');\r\n              }}\r\n            >\r\n              Back to List\r\n            </Button>\r\n            <div>\r\n              <Button \r\n                variant=\"danger\" \r\n                onClick={() => handleVerification('rejected')}\r\n                className=\"me-2\"\r\n              >\r\n                Reject Verification\r\n              </Button>\r\n              <Button \r\n                variant=\"success\" \r\n                onClick={() => handleVerification('verified')}\r\n              >\r\n                Approve Verification\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n            <div>\r\n              <Button variant=\"outline-primary\" size=\"sm\" onClick={fetchAllUsers}>\r\n                Refresh Data\r\n              </Button>\r\n              <span className=\"ms-2\">Found {filteredUsers.length} users</span>\r\n            </div>\r\n\r\n            <Tabs\r\n              activeKey={activeTab}\r\n              onSelect={handleTabChange}\r\n              className=\"mb-3\"\r\n            >\r\n              <Tab eventKey=\"pending\" title=\"Pending Verification\" />\r\n              <Tab eventKey=\"verified\" title=\"Verified Users\" />\r\n              <Tab eventKey=\"all\" title=\"All Users\" />\r\n            </Tabs>\r\n          </div>\r\n\r\n          {filteredUsers.length === 0 ? (\r\n            <div className=\"text-center\">\r\n              <p>{activeTab === 'verified' ? 'No verified users found.' : 'No users pending verification.'}</p>\r\n            </div>\r\n          ) : (\r\n            <Table responsive striped hover>\r\n              <thead>\r\n                <tr>\r\n                  <th>Name</th>\r\n                  <th>Email</th>\r\n                  <th>Status</th>\r\n                  <th>Loan Applications</th>\r\n                  <th>Actions</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filteredUsers.map(user => (\r\n                  <tr key={user._id} className={user.hasPendingLoans ? 'table-warning' : ''}>\r\n                    <td>{user.name}</td>\r\n                    <td>{user.email}</td>\r\n                    <td>\r\n                      <Badge bg={\r\n                        user.verificationStatus === 'pending' ? 'warning' : \r\n                        user.verificationStatus === 'verified' ? 'success' : \r\n                        user.verificationStatus === 'not_submitted' ? 'secondary' : 'danger'\r\n                      }>\r\n                        {user.verificationStatus === 'not_submitted' ? 'Not Submitted' : user.verificationStatus}\r\n                      </Badge>\r\n                    </td>\r\n                    <td>\r\n                      {user.loanCount} \r\n                      {user.pendingLoanCount > 0 && (\r\n                        <Badge bg=\"warning\" className=\"ms-2\">\r\n                          {user.pendingLoanCount} pending\r\n                        </Badge>\r\n                      )}\r\n                    </td>\r\n                    <td>\r\n                      <Button \r\n                        variant={user.hasPendingLoans ? \"warning\" : \"primary\"}\r\n                        size=\"sm\" \r\n                        onClick={() => handleViewDocuments(user._id)}\r\n                        className=\"me-2\"\r\n                      >\r\n                        {user.verificationStatus === 'verified' ? 'View Details' : 'Review Documents'}\r\n                        {user.hasPendingLoans && ' (Urgent)'}\r\n                      </Button>\r\n                      \r\n                      {user.verificationStatus !== 'verified' && user.hasPendingLoans && (\r\n                        <Button \r\n                          variant=\"success\"\r\n                          size=\"sm\" \r\n                          onClick={() => handleQuickVerify(user._id)}\r\n                          title=\"Quickly verify this user without reviewing documents\"\r\n                        >\r\n                          Quick Verify\r\n                        </Button>\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </Table>\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {/* Document Viewer Modal */}\r\n      <Modal \r\n        show={showDocumentModal} \r\n        onHide={() => setShowDocumentModal(false)}\r\n        size=\"lg\"\r\n        centered\r\n      >\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>\r\n            {currentDocument?.type === 'aadharCard' && 'Aadhar Card'}\r\n            {currentDocument?.type === 'panCard' && 'PAN Card'}\r\n            {currentDocument?.type === 'incomeProof' && 'Income Proof'}\r\n          </Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-center\">\r\n          {currentDocument && (\r\n            <div className=\"document-preview\">\r\n              <p className=\"mb-3\">Filename: {currentDocument.filename}</p>\r\n              <div className=\"border p-3\">\r\n                <p className=\"text-muted\">Document preview would appear here in a real application</p>\r\n                <p>This is a placeholder for document: {currentDocument.filename}</p>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={() => setShowDocumentModal(false)}>\r\n            Close\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserVerificationPanel; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}