{"ast":null,"code":"import axios from 'axios';\nconst API_URL = 'http://localhost:5000/api';\n\n// Register user\nexport const register = async userData => {\n  try {\n    const response = await axios.post(`${API_URL}/auth/register`, userData);\n    if (response.data.token) {\n      localStorage.setItem('token', response.data.token);\n      localStorage.setItem('userId', response.data._id);\n      localStorage.setItem('userRole', response.data.role);\n    }\n    return response.data;\n  } catch (error) {\n    var _error$response;\n    throw ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message;\n  }\n};\n\n// Login user\nexport const login = async (email, password) => {\n  try {\n    const response = await axios.post(`${API_URL}/auth/login`, {\n      email,\n      password\n    });\n    if (response.data.token) {\n      localStorage.setItem('token', response.data.token);\n      localStorage.setItem('userId', response.data._id);\n      localStorage.setItem('userRole', response.data.role);\n    }\n    return response.data;\n  } catch (error) {\n    var _error$response2;\n    throw ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || error.message;\n  }\n};\n\n// Logout user\nexport const logout = () => {\n  localStorage.removeItem('token');\n  localStorage.removeItem('userId');\n  localStorage.removeItem('userRole');\n};\n\n// Get current user\nexport const getCurrentUser = async () => {\n  try {\n    const response = await axios.get(`${API_URL}/auth/me`, getAuthHeader());\n    return response.data;\n  } catch (error) {\n    var _error$response3;\n    throw ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data) || error.message;\n  }\n};\n\n// Get auth header\nexport const getAuthHeader = () => {\n  const token = localStorage.getItem('token');\n  return {\n    headers: {\n      Authorization: token ? `Bearer ${token}` : ''\n    }\n  };\n};\n\n// Check if user is logged in\nexport const isLoggedIn = () => {\n  return !!localStorage.getItem('token');\n};\n\n// Check if user is admin\nexport const isAdmin = () => {\n  return localStorage.getItem('userRole') === 'admin';\n};","map":{"version":3,"names":["axios","API_URL","register","userData","response","post","data","token","localStorage","setItem","_id","role","error","_error$response","message","login","email","password","_error$response2","logout","removeItem","getCurrentUser","get","getAuthHeader","_error$response3","getItem","headers","Authorization","isLoggedIn","isAdmin"],"sources":["C:/Users/cpl/Desktop/Cursor/loan-management-system/client/src/services/authService.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = 'http://localhost:5000/api';\r\n\r\n// Register user\r\nexport const register = async (userData) => {\r\n  try {\r\n    const response = await axios.post(`${API_URL}/auth/register`, userData);\r\n    if (response.data.token) {\r\n      localStorage.setItem('token', response.data.token);\r\n      localStorage.setItem('userId', response.data._id);\r\n      localStorage.setItem('userRole', response.data.role);\r\n    }\r\n    return response.data;\r\n  } catch (error) {\r\n    throw error.response?.data || error.message;\r\n  }\r\n};\r\n\r\n// Login user\r\nexport const login = async (email, password) => {\r\n  try {\r\n    const response = await axios.post(`${API_URL}/auth/login`, { email, password });\r\n    if (response.data.token) {\r\n      localStorage.setItem('token', response.data.token);\r\n      localStorage.setItem('userId', response.data._id);\r\n      localStorage.setItem('userRole', response.data.role);\r\n    }\r\n    return response.data;\r\n  } catch (error) {\r\n    throw error.response?.data || error.message;\r\n  }\r\n};\r\n\r\n// Logout user\r\nexport const logout = () => {\r\n  localStorage.removeItem('token');\r\n  localStorage.removeItem('userId');\r\n  localStorage.removeItem('userRole');\r\n};\r\n\r\n// Get current user\r\nexport const getCurrentUser = async () => {\r\n  try {\r\n    const response = await axios.get(`${API_URL}/auth/me`, getAuthHeader());\r\n    return response.data;\r\n  } catch (error) {\r\n    throw error.response?.data || error.message;\r\n  }\r\n};\r\n\r\n// Get auth header\r\nexport const getAuthHeader = () => {\r\n  const token = localStorage.getItem('token');\r\n  return {\r\n    headers: {\r\n      Authorization: token ? `Bearer ${token}` : '',\r\n    },\r\n  };\r\n};\r\n\r\n// Check if user is logged in\r\nexport const isLoggedIn = () => {\r\n  return !!localStorage.getItem('token');\r\n};\r\n\r\n// Check if user is admin\r\nexport const isAdmin = () => {\r\n  return localStorage.getItem('userRole') === 'admin';\r\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}