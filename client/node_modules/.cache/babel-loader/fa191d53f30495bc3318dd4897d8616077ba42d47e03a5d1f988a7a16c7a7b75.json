{"ast":null,"code":"import axios from'axios';const API_URL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';// Register user\nexport const register=async userData=>{try{const response=await axios.post(`${API_URL}/auth/register`,userData);if(response.data.token){localStorage.setItem('token',response.data.token);localStorage.setItem('userId',response.data._id);localStorage.setItem('userRole',response.data.role);}return response.data;}catch(error){var _error$response;throw((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||error.message;}};// Login user\nexport const login=async(email,password)=>{try{const response=await axios.post(`${API_URL}/auth/login`,{email,password});if(response.data.token){localStorage.setItem('token',response.data.token);localStorage.setItem('userId',response.data._id);localStorage.setItem('userRole',response.data.role);}return response.data;}catch(error){var _error$response2;throw((_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.data)||error.message;}};// Logout user\nexport const logout=()=>{localStorage.removeItem('token');localStorage.removeItem('userId');localStorage.removeItem('userRole');};// Get current user\nexport const getCurrentUser=async()=>{try{const response=await axios.get(`${API_URL}/auth/me`,getAuthHeader());return response.data;}catch(error){var _error$response3;throw((_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.data)||error.message;}};// Get auth header\nexport const getAuthHeader=()=>{const token=localStorage.getItem('token');return{headers:{Authorization:token?`Bearer ${token}`:''}};};// Check if user is logged in\nexport const isLoggedIn=()=>{return!!localStorage.getItem('token');};// Check if user is admin\nexport const isAdmin=()=>{return localStorage.getItem('userRole')==='admin';};","map":{"version":3,"names":["axios","API_URL","process","env","REACT_APP_API_URL","register","userData","response","post","data","token","localStorage","setItem","_id","role","error","_error$response","message","login","email","password","_error$response2","logout","removeItem","getCurrentUser","get","getAuthHeader","_error$response3","getItem","headers","Authorization","isLoggedIn","isAdmin"],"sources":["C:/Users/cpl/Desktop/Cursor/loan-management-system/client/src/services/authService.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\n// Register user\r\nexport const register = async (userData) => {\r\n  try {\r\n    const response = await axios.post(`${API_URL}/auth/register`, userData);\r\n    if (response.data.token) {\r\n      localStorage.setItem('token', response.data.token);\r\n      localStorage.setItem('userId', response.data._id);\r\n      localStorage.setItem('userRole', response.data.role);\r\n    }\r\n    return response.data;\r\n  } catch (error) {\r\n    throw error.response?.data || error.message;\r\n  }\r\n};\r\n\r\n// Login user\r\nexport const login = async (email, password) => {\r\n  try {\r\n    const response = await axios.post(`${API_URL}/auth/login`, { email, password });\r\n    if (response.data.token) {\r\n      localStorage.setItem('token', response.data.token);\r\n      localStorage.setItem('userId', response.data._id);\r\n      localStorage.setItem('userRole', response.data.role);\r\n    }\r\n    return response.data;\r\n  } catch (error) {\r\n    throw error.response?.data || error.message;\r\n  }\r\n};\r\n\r\n// Logout user\r\nexport const logout = () => {\r\n  localStorage.removeItem('token');\r\n  localStorage.removeItem('userId');\r\n  localStorage.removeItem('userRole');\r\n};\r\n\r\n// Get current user\r\nexport const getCurrentUser = async () => {\r\n  try {\r\n    const response = await axios.get(`${API_URL}/auth/me`, getAuthHeader());\r\n    return response.data;\r\n  } catch (error) {\r\n    throw error.response?.data || error.message;\r\n  }\r\n};\r\n\r\n// Get auth header\r\nexport const getAuthHeader = () => {\r\n  const token = localStorage.getItem('token');\r\n  return {\r\n    headers: {\r\n      Authorization: token ? `Bearer ${token}` : '',\r\n    },\r\n  };\r\n};\r\n\r\n// Check if user is logged in\r\nexport const isLoggedIn = () => {\r\n  return !!localStorage.getItem('token');\r\n};\r\n\r\n// Check if user is admin\r\nexport const isAdmin = () => {\r\n  return localStorage.getItem('userRole') === 'admin';\r\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}