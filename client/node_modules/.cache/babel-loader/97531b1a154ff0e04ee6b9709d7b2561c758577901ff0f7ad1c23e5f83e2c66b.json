{"ast":null,"code":"import React,{useState,useEffect,useContext}from'react';import{Container,Row,Col,Card,Badge,Button,Alert,Nav,Tab}from'react-bootstrap';import{Link}from'react-router-dom';import{AuthContext}from'../context/AuthContext';import{getUserLoans}from'../services/loanService';import{getUserEmis}from'../services/emiService';import EmiList from'../components/emi/EmiList';// Helper function to format currency\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const formatCurrency=amount=>{return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD'}).format(amount);};// Helper function to format date\nconst formatDate=dateString=>{const options={year:'numeric',month:'long',day:'numeric'};return new Date(dateString).toLocaleDateString(undefined,options);};// Loan status badge component\nconst LoanStatusBadge=_ref=>{let{status}=_ref;let variant;switch(status){case'approved':variant='success';break;case'rejected':variant='danger';break;case'pending':variant='warning';break;case'paid':variant='primary';break;default:variant='secondary';}return/*#__PURE__*/_jsx(Badge,{bg:variant,children:status.toUpperCase()});};const Dashboard=()=>{const{user}=useContext(AuthContext);const[loans,setLoans]=useState([]);const[emis,setEmis]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[activeTab,setActiveTab]=useState('loans');const[refreshData,setRefreshData]=useState(false);// KYC Verification Status Alert Component\nconst KycAlert=()=>{if(!user)return null;if(user.verificationStatus==='not_submitted'){return/*#__PURE__*/_jsxs(Alert,{variant:\"warning\",className:\"mb-4\",children:[/*#__PURE__*/_jsx(Alert.Heading,{children:\"KYC Verification Required\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Your KYC verification is pending. To apply for loans and access all features, please complete your KYC verification by submitting the required documents.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-end\",children:/*#__PURE__*/_jsx(Link,{to:\"/kyc-submission\",children:/*#__PURE__*/_jsx(Button,{variant:\"outline-primary\",children:\"Complete KYC Verification\"})})})]});}else if(user.verificationStatus==='pending'){return/*#__PURE__*/_jsxs(Alert,{variant:\"info\",className:\"mb-4\",children:[/*#__PURE__*/_jsx(Alert.Heading,{children:\"KYC Verification In Progress\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Your KYC documents have been submitted and are currently under review. This process typically takes 1-2 business days. You'll be notified once the verification is complete.\"})]});}return null;};useEffect(()=>{const fetchData=async()=>{try{if(activeTab==='loans'||activeTab==='emi'){const loansData=await getUserLoans();setLoans(loansData);}if(activeTab==='emi'){const emisData=await getUserEmis();setEmis(emisData);}}catch(err){setError('Failed to fetch your data. Please try again later.');console.error(err);}finally{setLoading(false);}};fetchData();},[activeTab,refreshData]);// Calculate summary statistics\nconst calculateSummary=()=>{const totalLoans=loans.length;const approvedLoans=loans.filter(loan=>loan.status==='approved').length;const pendingLoans=loans.filter(loan=>loan.status==='pending').length;const rejectedLoans=loans.filter(loan=>loan.status==='rejected').length;const totalAmount=loans.reduce((sum,loan)=>sum+loan.amount,0);const approvedAmount=loans.filter(loan=>loan.status==='approved').reduce((sum,loan)=>sum+loan.amount,0);// Get upcoming EMI (nearest due date)\nconst pendingEmis=emis.filter(emi=>emi.status==='pending');let upcomingEmi=null;if(pendingEmis.length>0){upcomingEmi=pendingEmis.reduce((nearest,emi)=>{if(!nearest)return emi;return new Date(emi.dueDate)<new Date(nearest.dueDate)?emi:nearest;},null);}return{totalLoans,approvedLoans,pendingLoans,rejectedLoans,totalAmount,approvedAmount,upcomingEmi};};if(loading){return/*#__PURE__*/_jsx(Container,{className:\"mt-4\",children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Card.Body,{className:\"text-center\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Loading your data...\"})})})});}const summary=calculateSummary();return/*#__PURE__*/_jsxs(Container,{className:\"py-4\",children:[/*#__PURE__*/_jsx(KycAlert,{}),/*#__PURE__*/_jsxs(Row,{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Welcome, \",user===null||user===void 0?void 0:user.name]}),/*#__PURE__*/_jsx(\"p\",{children:\"Manage your loan applications and track their status.\"})]}),/*#__PURE__*/_jsx(Col,{xs:\"auto\",children:/*#__PURE__*/_jsx(Button,{as:Link,to:\"/apply-loan\",variant:\"primary\",children:\"Apply for New Loan\"})})]}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),/*#__PURE__*/_jsxs(Row,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"h-100 dashboard-stat-card\",children:/*#__PURE__*/_jsxs(Card.Body,{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-muted\",children:\"Total Loans\"}),/*#__PURE__*/_jsx(\"h3\",{children:summary.totalLoans}),/*#__PURE__*/_jsx(\"p\",{className:\"text-primary mb-0\",children:formatCurrency(summary.totalAmount)})]})})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"h-100 dashboard-stat-card\",children:/*#__PURE__*/_jsxs(Card.Body,{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-muted\",children:\"Active Loans\"}),/*#__PURE__*/_jsx(\"h3\",{children:summary.approvedLoans}),/*#__PURE__*/_jsx(\"p\",{className:\"text-success mb-0\",children:formatCurrency(summary.approvedAmount)})]})})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"h-100 dashboard-stat-card\",children:/*#__PURE__*/_jsxs(Card.Body,{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-muted\",children:\"Pending Applications\"}),/*#__PURE__*/_jsx(\"h3\",{children:summary.pendingLoans}),/*#__PURE__*/_jsx(\"p\",{className:\"text-warning mb-0\",children:summary.pendingLoans>0?'Awaiting approval':'None pending'})]})})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"h-100 dashboard-stat-card\",children:/*#__PURE__*/_jsxs(Card.Body,{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-muted\",children:\"Next Payment Due\"}),/*#__PURE__*/_jsx(\"h3\",{children:summary.upcomingEmi?formatCurrency(summary.upcomingEmi.amount):'No payment due'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-danger mb-0\",children:summary.upcomingEmi?formatDate(summary.upcomingEmi.dueDate):''})]})})})]}),/*#__PURE__*/_jsx(Tab.Container,{activeKey:activeTab,onSelect:k=>setActiveTab(k),children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsxs(Nav,{variant:\"tabs\",children:[/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsx(Nav.Link,{eventKey:\"loans\",children:\"My Loans\"})}),/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsx(Nav.Link,{eventKey:\"emi\",children:\"EMI Payments\"})})]})}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Tab.Content,{children:[/*#__PURE__*/_jsx(Tab.Pane,{eventKey:\"loans\",children:loans.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-center\",children:\"You haven't applied for any loans yet.\"}):loans.map(loan=>/*#__PURE__*/_jsx(Card,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h5\",{children:loan.purpose}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Amount:\"}),\" \",formatCurrency(loan.amount)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Term:\"}),\" \",loan.term,\" months\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Applied on:\"}),\" \",formatDate(loan.applicationDate)]}),loan.approvalDate&&/*#__PURE__*/_jsxs(\"p\",{className:\"mb-1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Approved on:\"}),\" \",formatDate(loan.approvalDate)]}),loan.rejectionReason&&/*#__PURE__*/_jsxs(\"p\",{className:\"mb-1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Rejection Reason:\"}),\" \",loan.rejectionReason]})]}),/*#__PURE__*/_jsxs(Col,{xs:\"auto\",className:\"d-flex flex-column align-items-end\",children:[/*#__PURE__*/_jsx(LoanStatusBadge,{status:loan.status}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-auto\",children:/*#__PURE__*/_jsx(Button,{as:Link,to:`/loans/${loan._id}`,variant:\"outline-primary\",size:\"sm\",className:\"mt-2\",children:\"View Details\"})})]})]})})},loan._id))}),/*#__PURE__*/_jsx(Tab.Pane,{eventKey:\"emi\",children:emis.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-center\",children:\"You don't have any EMI payments scheduled.\"}):/*#__PURE__*/_jsx(EmiList,{emis:emis,refreshEmis:()=>setRefreshData(!refreshData)})})]})})]})})})})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","useContext","Container","Row","Col","Card","Badge","Button","Alert","Nav","Tab","Link","AuthContext","getUserLoans","getUserEmis","EmiList","jsx","_jsx","jsxs","_jsxs","formatCurrency","amount","Intl","NumberFormat","style","currency","format","formatDate","dateString","options","year","month","day","Date","toLocaleDateString","undefined","LoanStatusBadge","_ref","status","variant","bg","children","toUpperCase","Dashboard","user","loans","setLoans","emis","setEmis","loading","setLoading","error","setError","activeTab","setActiveTab","refreshData","setRefreshData","KycAlert","verificationStatus","className","Heading","to","fetchData","loansData","emisData","err","console","calculateSummary","totalLoans","length","approvedLoans","filter","loan","pendingLoans","rejectedLoans","totalAmount","reduce","sum","approvedAmount","pendingEmis","emi","upcomingEmi","nearest","dueDate","Body","summary","name","xs","as","md","activeKey","onSelect","k","Header","Item","eventKey","Content","Pane","map","purpose","term","applicationDate","approvalDate","rejectionReason","_id","size","refreshEmis"],"sources":["C:/Users/cpl/Desktop/Cursor/loan-management-system/client/src/pages/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { Container, Row, Col, Card, Badge, Button, Alert, Nav, Tab } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport { AuthContext } from '../context/AuthContext';\nimport { getUserLoans } from '../services/loanService';\nimport { getUserEmis } from '../services/emiService';\nimport EmiList from '../components/emi/EmiList';\n\n// Helper function to format currency\nconst formatCurrency = (amount) => {\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD'\n  }).format(amount);\n};\n\n// Helper function to format date\nconst formatDate = (dateString) => {\n  const options = { year: 'numeric', month: 'long', day: 'numeric' };\n  return new Date(dateString).toLocaleDateString(undefined, options);\n};\n\n// Loan status badge component\nconst LoanStatusBadge = ({ status }) => {\n  let variant;\n  switch (status) {\n    case 'approved':\n      variant = 'success';\n      break;\n    case 'rejected':\n      variant = 'danger';\n      break;\n    case 'pending':\n      variant = 'warning';\n      break;\n    case 'paid':\n      variant = 'primary';\n      break;\n    default:\n      variant = 'secondary';\n  }\n  \n  return <Badge bg={variant}>{status.toUpperCase()}</Badge>;\n};\n\nconst Dashboard = () => {\n  const { user } = useContext(AuthContext);\n  const [loans, setLoans] = useState([]);\n  const [emis, setEmis] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [activeTab, setActiveTab] = useState('loans');\n  const [refreshData, setRefreshData] = useState(false);\n\n  // KYC Verification Status Alert Component\n  const KycAlert = () => {\n    if (!user) return null;\n    \n    if (user.verificationStatus === 'not_submitted') {\n      return (\n        <Alert variant=\"warning\" className=\"mb-4\">\n          <Alert.Heading>KYC Verification Required</Alert.Heading>\n          <p>\n            Your KYC verification is pending. To apply for loans and access all features, \n            please complete your KYC verification by submitting the required documents.\n          </p>\n          <div className=\"d-flex justify-content-end\">\n            <Link to=\"/kyc-submission\">\n              <Button variant=\"outline-primary\">Complete KYC Verification</Button>\n            </Link>\n          </div>\n        </Alert>\n      );\n    } else if (user.verificationStatus === 'pending') {\n      return (\n        <Alert variant=\"info\" className=\"mb-4\">\n          <Alert.Heading>KYC Verification In Progress</Alert.Heading>\n          <p>\n            Your KYC documents have been submitted and are currently under review. \n            This process typically takes 1-2 business days. You'll be notified once \n            the verification is complete.\n          </p>\n        </Alert>\n      );\n    }\n    \n    return null;\n  };\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        if (activeTab === 'loans' || activeTab === 'emi') {\n          const loansData = await getUserLoans();\n          setLoans(loansData);\n        }\n        \n        if (activeTab === 'emi') {\n          const emisData = await getUserEmis();\n          setEmis(emisData);\n        }\n      } catch (err) {\n        setError('Failed to fetch your data. Please try again later.');\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [activeTab, refreshData]);\n\n  // Calculate summary statistics\n  const calculateSummary = () => {\n    const totalLoans = loans.length;\n    const approvedLoans = loans.filter(loan => loan.status === 'approved').length;\n    const pendingLoans = loans.filter(loan => loan.status === 'pending').length;\n    const rejectedLoans = loans.filter(loan => loan.status === 'rejected').length;\n    \n    const totalAmount = loans.reduce((sum, loan) => sum + loan.amount, 0);\n    const approvedAmount = loans\n      .filter(loan => loan.status === 'approved')\n      .reduce((sum, loan) => sum + loan.amount, 0);\n\n    // Get upcoming EMI (nearest due date)\n    const pendingEmis = emis.filter(emi => emi.status === 'pending');\n    let upcomingEmi = null;\n    \n    if (pendingEmis.length > 0) {\n      upcomingEmi = pendingEmis.reduce((nearest, emi) => {\n        if (!nearest) return emi;\n        return new Date(emi.dueDate) < new Date(nearest.dueDate) ? emi : nearest;\n      }, null);\n    }\n\n    return {\n      totalLoans,\n      approvedLoans,\n      pendingLoans,\n      rejectedLoans,\n      totalAmount,\n      approvedAmount,\n      upcomingEmi\n    };\n  };\n\n  if (loading) {\n    return (\n      <Container className=\"mt-4\">\n        <Card>\n          <Card.Body className=\"text-center\">\n            <p>Loading your data...</p>\n          </Card.Body>\n        </Card>\n      </Container>\n    );\n  }\n\n  const summary = calculateSummary();\n\n  return (\n    <Container className=\"py-4\">\n      <KycAlert />\n      \n      <Row className=\"mb-4\">\n        <Col>\n          <h2>Welcome, {user?.name}</h2>\n          <p>Manage your loan applications and track their status.</p>\n        </Col>\n        <Col xs=\"auto\">\n          <Button as={Link} to=\"/apply-loan\" variant=\"primary\">\n            Apply for New Loan\n          </Button>\n        </Col>\n      </Row>\n\n      {error && <Alert variant=\"danger\">{error}</Alert>}\n\n      <Row className=\"mb-4\">\n        <Col md={3}>\n          <Card className=\"h-100 dashboard-stat-card\">\n            <Card.Body className=\"text-center\">\n              <h6 className=\"text-muted\">Total Loans</h6>\n              <h3>{summary.totalLoans}</h3>\n              <p className=\"text-primary mb-0\">\n                {formatCurrency(summary.totalAmount)}\n              </p>\n            </Card.Body>\n          </Card>\n        </Col>\n        <Col md={3}>\n          <Card className=\"h-100 dashboard-stat-card\">\n            <Card.Body className=\"text-center\">\n              <h6 className=\"text-muted\">Active Loans</h6>\n              <h3>{summary.approvedLoans}</h3>\n              <p className=\"text-success mb-0\">\n                {formatCurrency(summary.approvedAmount)}\n              </p>\n            </Card.Body>\n          </Card>\n        </Col>\n        <Col md={3}>\n          <Card className=\"h-100 dashboard-stat-card\">\n            <Card.Body className=\"text-center\">\n              <h6 className=\"text-muted\">Pending Applications</h6>\n              <h3>{summary.pendingLoans}</h3>\n              <p className=\"text-warning mb-0\">\n                {summary.pendingLoans > 0 ? 'Awaiting approval' : 'None pending'}\n              </p>\n            </Card.Body>\n          </Card>\n        </Col>\n        <Col md={3}>\n          <Card className=\"h-100 dashboard-stat-card\">\n            <Card.Body className=\"text-center\">\n              <h6 className=\"text-muted\">Next Payment Due</h6>\n              <h3>\n                {summary.upcomingEmi \n                  ? formatCurrency(summary.upcomingEmi.amount) \n                  : 'No payment due'}\n              </h3>\n              <p className=\"text-danger mb-0\">\n                {summary.upcomingEmi \n                  ? formatDate(summary.upcomingEmi.dueDate) \n                  : ''}\n              </p>\n            </Card.Body>\n          </Card>\n        </Col>\n      </Row>\n\n      <Tab.Container activeKey={activeTab} onSelect={(k) => setActiveTab(k)}>\n        <Row>\n          <Col>\n            <Card>\n              <Card.Header>\n                <Nav variant=\"tabs\">\n                  <Nav.Item>\n                    <Nav.Link eventKey=\"loans\">My Loans</Nav.Link>\n                  </Nav.Item>\n                  <Nav.Item>\n                    <Nav.Link eventKey=\"emi\">EMI Payments</Nav.Link>\n                  </Nav.Item>\n                </Nav>\n              </Card.Header>\n              <Card.Body>\n                <Tab.Content>\n                  <Tab.Pane eventKey=\"loans\">\n                    {loans.length === 0 ? (\n                      <p className=\"text-center\">You haven't applied for any loans yet.</p>\n                    ) : (\n                      loans.map((loan) => (\n                        <Card key={loan._id} className=\"mb-3\">\n                          <Card.Body>\n                            <Row>\n                              <Col>\n                                <h5>{loan.purpose}</h5>\n                                <p className=\"mb-1\">\n                                  <strong>Amount:</strong> {formatCurrency(loan.amount)}\n                                </p>\n                                <p className=\"mb-1\">\n                                  <strong>Term:</strong> {loan.term} months\n                                </p>\n                                <p className=\"mb-1\">\n                                  <strong>Applied on:</strong> {formatDate(loan.applicationDate)}\n                                </p>\n                                {loan.approvalDate && (\n                                  <p className=\"mb-1\">\n                                    <strong>Approved on:</strong> {formatDate(loan.approvalDate)}\n                                  </p>\n                                )}\n                                {loan.rejectionReason && (\n                                  <p className=\"mb-1\">\n                                    <strong>Rejection Reason:</strong> {loan.rejectionReason}\n                                  </p>\n                                )}\n                              </Col>\n                              <Col xs=\"auto\" className=\"d-flex flex-column align-items-end\">\n                                <LoanStatusBadge status={loan.status} />\n                                <div className=\"mt-auto\">\n                                  <Button \n                                    as={Link} \n                                    to={`/loans/${loan._id}`} \n                                    variant=\"outline-primary\" \n                                    size=\"sm\"\n                                    className=\"mt-2\"\n                                  >\n                                    View Details\n                                  </Button>\n                                </div>\n                              </Col>\n                            </Row>\n                          </Card.Body>\n                        </Card>\n                      ))\n                    )}\n                  </Tab.Pane>\n                  <Tab.Pane eventKey=\"emi\">\n                    {emis.length === 0 ? (\n                      <p className=\"text-center\">You don't have any EMI payments scheduled.</p>\n                    ) : (\n                      <EmiList emis={emis} refreshEmis={() => setRefreshData(!refreshData)} />\n                    )}\n                  </Tab.Pane>\n                </Tab.Content>\n              </Card.Body>\n            </Card>\n          </Col>\n        </Row>\n      </Tab.Container>\n    </Container>\n  );\n};\n\nexport default Dashboard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}